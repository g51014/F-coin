(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"0SRj":function(t,e,n){"use strict";n.r(e),n.d(e,"PiCoinModule",(function(){return ct}));var i=n("ofXK"),s=n("tyNb"),r=n("gVuf"),a=n("1G5W"),o=n("vkgz"),l=n("C1Kp"),u=n("fXoL"),h=n("8se7"),c=n("bagz"),d=n("46P/");let p=(()=>{class t extends i.e{constructor(){super("en-US")}transform(t,e){switch(e){case"mediumDateTime":return super.transform(t,"yyyy-MM-dd HH:mm:ss");case"shortDateTime":return super.transform(t,"yyyy-MM-dd HH:mm");case"mediumTime":return super.transform(t,"HH:mm:ss");case"shortTime":return super.transform(t,"HH:mm");case"reportDate":return super.transform(t,"yyyy-MM");default:return super.transform(t,"yyyy-MM-dd")}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=u.Gb({name:"customDate",type:t,pure:!0}),t})();function g(t,e){}function _(t,e){}function f(t,e){}const m=function(){return{$implicit:1}},y=function(){return{$implicit:.25}};function b(t,e){if(1&t&&(u.Kb(0,"p",8),u.kc(1,"\u9ede\u64ca\u756b\u9762\u53ef\u958b\u59cb\u6316\u7926\uff0c\u6316\u7926\u671f\u9593\u6bcf\u79d2\u53ef\u7372\u5f97"),u.ic(2,_,0,0,"ng-template",9),u.kc(3,"\uff0c\u540c\u6642\u9593\u6709\u670b\u53cb\u6b63\u5728\u9032\u884c\u6316\u7926\u7684\u8a71\uff0c\u5247\u6bcf\u79d2\u53ef\u984d\u5916\u7372\u5f97"),u.ic(4,f,0,0,"ng-template",9),u.Jb()),2&t){u.Tb(2);const t=u.dc(12);u.xb(2),u.Zb("ngTemplateOutlet",t)("ngTemplateOutletContext",u.ac(4,m)),u.xb(2),u.Zb("ngTemplateOutlet",t)("ngTemplateOutletContext",u.ac(5,y))}}function C(t,e){if(1&t&&(u.Kb(0,"p",8),u.kc(1),u.Ub(2,"customDate"),u.Jb()),2&t){const t=u.Tb(2);u.xb(1),u.mc("\u4e0b\u6b21\u53ef\u6316\u7926\u6642\u9593\uff1a ",u.Wb(2,1,t.$piCoin.nextDiggingTime,"shortDateTime"),"")}}function V(t,e){if(1&t&&(u.ic(0,b,5,6,"p",7),u.ic(1,C,3,4,"p",7)),2&t){const t=u.Tb();u.Zb("ngIf",t.allowDigging),u.xb(1),u.Zb("ngIf",!t.allowDigging)}}function v(t,e){}const O=function(t){return{$implicit:t}};function A(t,e){if(1&t&&(u.Kb(0,"p",16),u.kc(1,"\u6bcf\u79d2\u53ef\u7372\u5f97"),u.ic(2,v,0,0,"ng-template",9),u.kc(3," \uff0c\u7d50\u675f\u5f8c24\u5c0f\u6642\u5167\u4e0d\u53ef\u4ee5\u518d\u6316\u7926 "),u.Jb()),2&t){const t=e.ngIf,n=u.Tb(2),i=u.dc(12);u.xb(2),u.Zb("ngTemplateOutlet",i)("ngTemplateOutletContext",u.bc(2,O,1+.25*n.getDiggingFriendsNumber(t)))}}function w(t,e){if(1&t){const t=u.Lb();u.Kb(0,"div",10),u.Kb(1,"div",11),u.Kb(2,"h1",12),u.kc(3,"\u6316\u7926\u4e2d"),u.Ib(4,"em",13),u.Jb(),u.Jb(),u.ic(5,A,4,4,"p",14),u.Ub(6,"async"),u.Kb(7,"button",15),u.Rb("click",(function(e){return u.fc(t),u.Tb().stop(e)})),u.kc(8,"\u7d50\u675f"),u.Jb(),u.Jb()}if(2&t){const t=u.Tb();u.xb(5),u.Zb("ngIf",u.Vb(6,1,t.$user.friends$))}}function E(t,e){1&t&&(u.kc(0),u.Ib(1,"img",3)),2&t&&u.mc(" ",e.$implicit," \u679a")}const D=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,n){super(),this.$piCoin=t,this.$user=e,this.$time=n,this.piCoins=0}ngOnInit(){this.$piCoin.piCoin$.pipe(Object(a.a)(this.onDestroy$),Object(o.a)(t=>this.piCoins=t)).subscribe()}get allowDigging(){return!this.$time.isAfterToday(this.$piCoin.nextDiggingTime)}dip(){!this.$piCoin.isDigging&&this.allowDigging&&(this.$piCoin.onDig(),this.$piCoin.isDigging=!0)}getDiggingFriendsNumber(t){return t.filter(t=>t.status===l.a.Digging).length}stop(t){t&&t.stopPropagation(),this.$piCoin.endDig()}onDestory(){this.stop()}}return t.\u0275fac=function(e){return new(e||t)(u.Hb(h.a),u.Hb(c.a),u.Hb(d.a))},t.\u0275cmp=u.Bb({type:t,selectors:[["app-dashboard"]],hostBindings:function(t,e){1&t&&u.Rb("click",(function(){return e.dip()}))},features:[u.ub],decls:13,vars:2,consts:[[1,"row","Dashboard","pt-md-4_2","pt-2"],[3,"ngTemplateOutlet"],[1,"Dashboard__Coins","mt-4_2"],["src","assets/images/p-coin-white.png","alt","",1,"ml-1"],["tStart",""],["tEnd",""],["tCoins",""],["class","col-12 text-md-center",4,"ngIf"],[1,"col-12","text-md-center"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-12"],[1,"Dashboard__Digging"],[1,"text-center"],[1,"icon-loading"],["class","mt-2 text-center",4,"ngIf"],["type","button",3,"click"],[1,"mt-2","text-center"]],template:function(t,e){if(1&t&&(u.Kb(0,"div",0),u.ic(1,g,0,0,"ng-template",1),u.Kb(2,"div",2),u.Kb(3,"h1"),u.kc(4,"\u6211\u7684\u8cc7\u7522\uff1a"),u.Jb(),u.kc(5),u.Ib(6,"img",3),u.Jb(),u.Jb(),u.ic(7,V,2,2,"ng-template",null,4,u.jc),u.ic(9,w,9,3,"ng-template",null,5,u.jc),u.ic(11,E,2,1,"ng-template",null,6,u.jc)),2&t){const t=u.dc(8),n=u.dc(10);u.xb(1),u.Zb("ngTemplateOutlet",e.$piCoin.isDigging?n:t),u.xb(4),u.mc(" ",e.piCoins," ")}},directives:[i.k,i.j],pipes:[p,i.b],styles:[".Dashboard[_ngcontent-%COMP%]{height:100%}.Dashboard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.Dashboard[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:fixed;right:2rem;bottom:2rem;height:2.5rem;width:auto!important;color:#fff;border:1px solid #fff}.Dashboard[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fbb44a;border-color:#fbb44a}.Dashboard__Digging[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Dashboard__Digging[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:relative}.Dashboard__Digging[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{position:absolute;top:50%;right:-2rem;animation-name:rotatation;animation-duration:1s;animation-iteration-count:infinite}.Dashboard__Coins[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);border:2px solid #fff;border-radius:100%;height:18rem;width:18rem;display:flex;justify-content:center;align-items:center;font-size:1.25rem}@media screen and (max-width:767px){.Dashboard__Coins[_ngcontent-%COMP%]{width:12rem;height:12rem;font-size:1.125rem}.Dashboard__Coins[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.Dashboard[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:1rem;right:1rem}}@keyframes rotatation{0%{transform:translateY(-50%) rotate(0deg)}to{transform:translateY(-50%) rotate(359deg)}}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},imports:[[s.c.forChild(D)],s.c]}),t})();var P=n("HDdC"),S=n("DH7j"),j=n("lJxs"),T=n("XoHu"),x=n("Cfvw");function M(t,e){return new P.a(n=>{const i=t.length;if(0===i)return void n.complete();const s=new Array(i);let r=0,a=0;for(let o=0;o<i;o++){const l=Object(x.a)(t[o]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,a++),s[o]=t},error:t=>n.error(t),complete:()=>{r++,r!==i&&u||(a===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=s[n],t),{}):s),n.complete())}}))}})}function $(t){return null==t||0===t.length}function F(t){return null!=t&&"number"==typeof t.length}const I=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class H{static min(t){return e=>{if($(e.value)||$(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if($(e.value)||$(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return $(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return $(t.value)||I.test(t.value)?null:{email:!0}}static minLength(t){return e=>$(e.value)||!F(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>F(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return H.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if($(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(U);return 0==e.length?null:function(t){return z(J(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(U);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(S.a)(e))return M(e,null);if(Object(T.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return M(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return M(t=1===t.length&&Object(S.a)(t[0])?t[0]:t,null).pipe(Object(j.a)(t=>e(...t)))}return M(t,null)}(J(t,e).map(Z)).pipe(Object(j.a)(z))}}}function U(t){return null!=t}function Z(t){const e=Object(u.pb)(t)?Object(x.a)(t):t;return Object(u.ob)(e),e}function z(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function J(t,e){return e.map(e=>e(t))}function K(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}let N=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u.Db({token:t,factory:t.\u0275fac}),t})();const L="VALID",q="INVALID",R="PENDING",B="DISABLED";function G(t){return(Q(t)?t.validators:t)||null}function W(t){return Array.isArray(t)?null!=(e=t)?H.compose(K(e)):null:t||null;var e}function X(t,e){return(Q(e)?e.asyncValidators:t)||null}function Y(t){return Array.isArray(t)?null!=(e=t)?H.composeAsync(K(e)):null:t||null;var e}function Q(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class tt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=W(this._rawValidators),this._composedAsyncValidatorFn=Y(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===L}get invalid(){return this.status===q}get pending(){return this.status==R}get disabled(){return this.status===B}get enabled(){return this.status!==B}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=W(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Y(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=R,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=B,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=L,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==L&&this.status!==R||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?B:L}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=R,this._hasOwnPendingAsyncValidator=!0;const e=Z(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof nt?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof it&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new u.n,this.statusChanges=new u.n}_calculateStatus(){return this._allControlsDisabled()?B:this.errors?q:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R)?R:this._anyControlsHaveStatus(q)?q:L}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Q(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class et extends tt{constructor(t=null,e,n){super(G(e),X(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class nt extends tt{constructor(t,e,n){super(G(e),X(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof et?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class it extends tt{constructor(t,e,n){super(G(e),X(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof et?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const st=new u.q("NgModelWithFormControlWarning");let rt=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)}}),t})(),at=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let i=null,s=null,r=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new nt(n,{asyncValidators:s,updateOn:r,validators:i})}control(t,e,n){return new et(t,e,n)}array(t,e,n){const i=t.map(t=>this._createControl(t));return new it(i,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof et||t instanceof nt||t instanceof it?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=u.Db({token:t,factory:t.\u0275fac}),t})(),ot=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},providers:[N],imports:[rt]}),t})(),lt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:st,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},providers:[at,N],imports:[rt]}),t})(),ut=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),ht=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},imports:[[i.c,ot,lt,ut],ot,lt,ut]}),t})(),ct=(()=>{class t{}return t.\u0275mod=u.Fb({type:t}),t.\u0275inj=u.Eb({factory:function(e){return new(e||t)},imports:[[i.c,k,ht]]}),t})()}}]);